# GenPic Master - ä¼æ¥­ç´š AI åœ–ç‰‡ç”Ÿæˆå¹³å°

> ç”¢å“è¦åŠƒæ–‡ä»¶ v2.0  
> æœ€å¾Œæ›´æ–°ï¼š2026-02-10

---

## ä¸€ã€ç”¢å“é¡˜æ™¯

**GenPic Master** æ˜¯ä¸€å€‹ä¼æ¥­ç´š AI åœ–ç‰‡ç”Ÿæˆå¹³å°ï¼Œå°ˆç‚ºå°‡ä¼æ¥­æ–‡ä»¶ï¼ˆä¼åŠƒæ›¸ã€SOPã€æ•™è‚²è¨“ç·´ç°¡å ±ã€æ”¿åºœæ–‡å®£ï¼‰è½‰åŒ–ç‚º**é¢¨æ ¼ä¸€è‡´ã€é«˜åº¦ç›¸ä¾çš„é€£çºŒåŠ‡æƒ…åœ–**è€Œè¨­è¨ˆã€‚

### æ ¸å¿ƒåƒ¹å€¼ä¸»å¼µ

| ç—›é» | è§£æ±ºæ–¹æ¡ˆ |
|------|----------|
| ä¼æ¥­è£½ä½œè¦–è¦ºç´ æè€—æ™‚è²»åŠ› | AI è‡ªå‹•ç”Ÿæˆï¼Œåˆ†é˜ç´šç”¢å‡º |
| å§”å¤–è¨­è¨ˆé¢¨æ ¼é›£çµ±ä¸€ | é¢¨æ ¼é–å®šæ©Ÿåˆ¶ï¼Œç¢ºä¿ç³»åˆ—åœ–ä¸€è‡´æ€§ |
| æ–‡ä»¶å…§å®¹é›£ä»¥è¦–è¦ºåŒ– | æ™ºæ…§æ–‡ä»¶åˆ†æï¼Œè‡ªå‹•æå–é—œéµå ´æ™¯ |
| AI ç”Ÿæˆå¯èƒ½ç”¢å‡ºä¸ç•¶å…§å®¹ | å¤šå±¤å…§å®¹å¯©æ ¸æ©Ÿåˆ¶ï¼Œç¢ºä¿ä¼æ¥­åˆè¦ |

---

## ä¸€ä¹‹äºŒã€ç¾æ³è©•ä¼° (Current State Analysis)

> åœ¨è¦åŠƒé‡æ§‹å‰ï¼Œå¿…é ˆå…ˆæ¸…æ¥šèªçŸ¥ç›®å‰ç¨‹å¼ç¢¼çš„æŠ€è¡“å‚µã€‚

### å·²å¯¦ä½œåŠŸèƒ½

| åŠŸèƒ½ | ç‹€æ…‹ | æŠ€è¡“å¯¦ç¾ |
|:---|:---|:---|
| åƒè€ƒåœ–é¢¨æ ¼åˆ†æ | âœ… å¯ç”¨ | Firebase Vertex AI SDK â†’ Gemini Flash |
| é¢¨æ ¼æç¤ºè©ç”Ÿæˆ | âœ… å¯ç”¨ | JSON çµæ§‹åŒ–å›å‚³ (ä¸­æ–‡æè¿° + è‹±æ–‡ Prompt) |
| é¢¨æ ¼æ”¶è— CRUD | âœ… å¯ç”¨ | Firestore ç›´æ¥è®€å¯« |
| å–®å¼µåœ–ç‰‡ç”Ÿæˆ | âœ… å¯ç”¨ | Firebase Vertex AI SDK â†’ Imagen 3 |
| Microsoft SSO ç™»å…¥ | âœ… å¯ç”¨ | Firebase Auth + OAuthProvider |
| ç”Ÿæˆæ­·å²è¨˜éŒ„ | âœ… å¯ç”¨ | Firestore + Base64 åœ–ç‰‡ (å£“ç¸®è‡³ JPEG 0.6) |

### ä¸»è¦æŠ€è¡“å‚µ

| å•é¡Œ | åš´é‡åº¦ | èªªæ˜ |
|:---|:---:|:---|
| **God Component** | ğŸ”´ | `InfographicGenerator.jsx` å–®æª” 969 è¡Œï¼ŒUI + é‚è¼¯ + API å…¨éƒ¨è€¦åˆ |
| **API Key å¤–æ´©é¢¨éšª** | ğŸ”´ | `VITE_GEMINI_API_KEY` æ‰“åŒ…é€²å‰ç«¯ Bundleï¼Œå¯è¢« DevTools æ“·å– |
| **ç„¡å…ƒä»¶æ‹†åˆ†** | ğŸ”´ | å…¨ç«™åƒ…ä¸€å€‹ React Componentï¼Œç„¡æ³•ç¨ç«‹æ¸¬è©¦æˆ–è¤‡ç”¨ |
| **åœ–ç‰‡å­˜ Firestore** | ğŸŸ¡ | Base64 å­—ä¸²å­˜é€² Firestore documentï¼Œæœ‰ 1MB é™åˆ¶ä¸”æ•ˆèƒ½å·® |
| **ç„¡éŒ¯èª¤é‚Šç•Œ** | ğŸŸ¡ | ä»»ä½•å­å…ƒä»¶ crash å°‡å°è‡´å…¨ç«™ç™½å± |
| **ç„¡è·¯ç”±æ©Ÿåˆ¶** | ğŸŸ¡ | SPA å…§éƒ¨ä½¿ç”¨ Tab state åˆ‡æ›ï¼Œç„¡æ³•ç›´é€£ç‰¹å®šé é¢ |
| **ç„¡ API æŠ½è±¡å±¤** | ğŸŸ¡ | Firebase SDK ç›´æ¥æ•£ä½ˆåœ¨ UI å…ƒä»¶ä¸­ï¼Œæ›´æ› backend éœ€å¤§æ”¹ |
| **ç„¡æ¸¬è©¦** | ğŸŸ¡ | é›¶æ¸¬è©¦è¦†è“‹ï¼Œé‡æ§‹æ™‚ç¼ºä¹ä¿è­·ç¶² |
| **shadcn/ui æœªå®‰è£** | ğŸŸ¢ | DESIGN_GUIDELINE.md å·²è¦åŠƒä½†å°šæœªå®‰è£å…ƒä»¶ |

---

## äºŒã€ç›®æ¨™ä½¿ç”¨è€…

| ä½¿ç”¨è€…é¡å‹ | ä½¿ç”¨æƒ…å¢ƒ | æ ¸å¿ƒéœ€æ±‚ |
|------------|----------|----------|
| **ä¼æ¥­å…§éƒ¨å“¡å·¥** | è£½ä½œå…§éƒ¨æ•™è‚²è¨“ç·´ç´ æ | å¿«é€Ÿå°‡ SOP è½‰ç‚ºåœ–è§£æ­¥é©Ÿ |
| **è¡ŒéŠ·å–®ä½** | è£½ä½œå°å¤–å®£å‚³ç´ æ | å“ç‰Œé¢¨æ ¼ä¸€è‡´æ€§ã€æ‰¹æ¬¡ç”¢å‡º |
| **æ”¿åºœæ©Ÿé—œ** | è£½ä½œå…¬å…±æ”¿ç­–å®£å° | å…§å®¹å¯©æ ¸åš´æ ¼ã€å¤šèªç³»æ”¯æ´ |

---

## ä¸‰ã€åŠŸèƒ½è¦åŠƒ

### 3.1 æ ¸å¿ƒåŠŸèƒ½

#### ğŸ“„ æ™ºæ…§æ–‡ä»¶åˆ†æå¼•æ“

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
|------|------|--------|
| å¤šæ ¼å¼æ”¯æ´ | PDFã€Word (.docx)ã€PowerPoint (.pptx)ã€ç´”æ–‡å­— (.txt/.md)ã€PNGã€JPG | P0 |
| æ–‡ä»¶çµæ§‹è§£æ | è­˜åˆ¥æ¨™é¡Œã€æ®µè½ã€æ¢åˆ—ã€åœ–è¡¨ã€é‡é»æ¨™è¨˜ | P0 |
| é—œéµå ´æ™¯æ“·å– | è‡ªå‹•è­˜åˆ¥æ–‡ä»¶ä¸­é©åˆè¦–è¦ºåŒ–çš„é—œéµå ´æ™¯ | P0 |
| åŠ‡æƒ…åˆ†é¡è¦åŠƒ | å°‡æ–‡ä»¶åˆ‡åˆ†ç‚ºå¤šå€‹é€£çºŒå ´æ™¯ï¼Œå»ºç«‹æ•…äº‹ç·š | P0 |
| è§’è‰²/ç‰©ä»¶ä¸€è‡´æ€§ | è­˜åˆ¥æ–‡ä»¶ä¸­çš„è§’è‰²èˆ‡ç‰©ä»¶ï¼Œç¢ºä¿è·¨åœ–ä¸€è‡´ | P1 |

#### ğŸ¨ é¢¨æ ¼ç®¡ç†ç³»çµ±

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
|------|------|--------|
| åƒè€ƒåœ–é¢¨æ ¼åˆ†æ | ä¸Šå‚³åƒè€ƒåœ–ï¼ŒAI åˆ†æä¸¦æå–é¢¨æ ¼ç‰¹å¾µ | P0 (å·²å¯¦ä½œ) |
| é¢¨æ ¼æç¤ºè©ç”Ÿæˆ | è‡ªå‹•ç”Ÿæˆä¸­è‹±æ–‡é¢¨æ ¼æè¿°èˆ‡æ¨™ç±¤ | P0 (å·²å¯¦ä½œ) |
| é¢¨æ ¼æ”¶è—åº« | å„²å­˜ã€å‘½åã€æ¨™ç±¤åŒ–å¸¸ç”¨é¢¨æ ¼ | P0 (å·²å¯¦ä½œ) |
| ä¼æ¥­é¢¨æ ¼ç¯„æœ¬ | é è¨­ä¼æ¥­å¸¸ç”¨é¢¨æ ¼ï¼ˆæ‰å¹³æ’ç•«ã€3Dã€å¯«å¯¦ç­‰ï¼‰ | P1 |
| å“ç‰Œè‰²å½©é–å®š | æŒ‡å®šå“ç‰Œä¸»è‰²ç³»ï¼Œç”Ÿæˆæ™‚è‡ªå‹•å¥—ç”¨ | P1 |

#### ğŸ–¼ï¸ é€£çºŒåŠ‡æƒ…åœ–ç”Ÿæˆ

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
|------|------|--------|
| å–®å¼µåœ–ç‰‡ç”Ÿæˆ | çµåˆé¢¨æ ¼èˆ‡è…³æœ¬ç”Ÿæˆå–®å¼µåœ–ç‰‡ | P0 (å·²å¯¦ä½œ) |
| æ‰¹æ¬¡å ´æ™¯ç”Ÿæˆ | ä¸€æ¬¡ç”Ÿæˆå¤šå¼µé€£çºŒå ´æ™¯åœ– | P0 |
| è§’è‰²ä¸€è‡´æ€§å¼•æ“ | ç¢ºä¿åŒä¸€è§’è‰²åœ¨ä¸åŒå ´æ™¯å¤–è§€ä¸€è‡´ | P0 |
| å ´æ™¯é€£è²«æ€§æ§åˆ¶ | ç¶­æŒèƒŒæ™¯ã€æ™‚é–“ã€ç’°å¢ƒçš„é€£çºŒæ€§ | P1 |
| åœ–ç‰‡é•·å¯¬æ¯”è¨­å®š | 16:9 / 4:3 / 1:1 / 9:16 | P0 (å¾…ä¿®å¾©) |
| è§£æåº¦é¸é … | æ¨™æº– / é«˜æ¸… / 4K | P1 |

---

### 3.2 è¼”åŠ©åŠŸèƒ½

#### ğŸ‘¤ ä½¿ç”¨è€…ç®¡ç†

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
|------|------|--------|
| Microsoft SSO ç™»å…¥ | ä¼æ¥­å¸³è™Ÿæ•´åˆ | P0 (å·²å¯¦ä½œ) |
| å¤šç§Ÿæˆ¶æ¶æ§‹ | ä¼æ¥­é–“è³‡æ–™éš”é›¢ | P0 |
| è§’è‰²æ¬Šé™æ§åˆ¶ | ç®¡ç†å“¡ / ç·¨è¼¯è€… / æª¢è¦–è€… | P1 |
| ç”¨é‡é…é¡ç®¡ç† | æ¯æœˆ API ç”¨é‡ä¸Šé™ | P1 |

#### ğŸ“š è³‡ç”¢ç®¡ç†

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
|------|------|--------|
| ç”Ÿæˆæ­·å²è¨˜éŒ„ | ä¿å­˜æ‰€æœ‰ç”Ÿæˆçš„åœ–ç‰‡ | P0 (å·²å¯¦ä½œ) |
| å°ˆæ¡ˆè³‡æ–™å¤¾ | æŒ‰å°ˆæ¡ˆçµ„ç¹”åœ–ç‰‡ | P1 |
| åœ–ç‰‡æ¨™ç±¤åˆ†é¡ | è‡ªå‹•/æ‰‹å‹•æ¨™ç±¤ | P2 |
| æ‰¹æ¬¡ä¸‹è¼‰åŒ¯å‡º | æ‰“åŒ…ä¸‹è¼‰æ•´å€‹å°ˆæ¡ˆ | P1 |

#### ï¿½ï¸ å…§å®¹å¯©æ ¸ (Content Moderation)

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
|------|------|--------|
| Prompt æ•æ„Ÿè©éæ¿¾ | é€å‡ºå‰æª¢æŸ¥ä½¿ç”¨è€…è¼¸å…¥æ˜¯å¦å«ä¸ç•¶å…§å®¹ | P0 |
| AI å®‰å…¨è¨­å®š | è¨­å®š Gemini Safety Settings (BLOCK_MEDIUM_AND_ABOVE) | P0 |
| ç”Ÿæˆçµæœå¯©æ ¸ | å° AI å›å‚³çš„åœ–ç‰‡é€²è¡ŒäºŒæ¬¡åˆè¦æª¢æŸ¥ | P1 |
| å¯©æ ¸æ—¥èªŒ | è¨˜éŒ„è¢«æ””æˆªçš„è«‹æ±‚ï¼Œä¾›ç®¡ç†è€…å¯©é–± | P2 |

#### ï¿½ğŸ”— æ•´åˆèˆ‡ API

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
|------|------|--------|
| REST API | æä¾›ç¨‹å¼åŒ–å­˜å– | P1 |
| Webhook é€šçŸ¥ | ç”Ÿæˆå®Œæˆé€šçŸ¥ | P2 |
| ç¬¬ä¸‰æ–¹æ•´åˆ | Teamsã€Slackã€Notion | P2 |

### 3.3 å¤šè£ç½®æ”¯æ´ (Mobile Experience)

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
| :--- | :--- | :--- |
| **éŸ¿æ‡‰å¼è¨­è¨ˆ (RWD)** | å…¨ç«™ä»‹é¢è‡ªå‹•é©æ‡‰æ‰‹æ©Ÿã€å¹³æ¿ã€æ¡Œæ©Ÿï¼Œç¢ºä¿è·¨è£ç½®é«”é©—ä¸€è‡´ | P0 |
| **è¡Œå‹•è£ç½®æª¢è¦–** | é‡å°æ‰‹æ©Ÿæä¾›æœ€ä½³åŒ–çš„ã€Œç›´å¼å¡ç‰‡ç€è¦½ã€æ¨¡å¼ï¼Œæ–¹ä¾¿é€šå‹¤æ™‚å¯©é–± | P0 |
| **è§¸æ§æ‰‹å‹¢å„ªåŒ–** | æ”¯æ´æ»‘å‹•æ›é ã€é›™æŒ‡ç¸®æ”¾ç­‰åŸç”Ÿæ‰‹å‹¢æ“ä½œ | P1 |
| **è¡Œå‹•ç‰ˆç°¡æ˜“ç·¨è¼¯** | æ”¯æ´æ‰‹æ©Ÿç«¯å¿«é€Ÿä¿®æ”¹ Prompt èˆ‡é‡ç¹ªï¼Œè¤‡é›œæ’ç‰ˆåŠŸèƒ½å‰‡å¼•å°è‡³æ¡Œæ©Ÿç‰ˆ | P1 |

### 3.4 ç¼ºæ¼åŠŸèƒ½è£œå…… (Identified Gaps)

#### ğŸŒ åœ‹éš›åŒ– (i18n)

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
|:---|:---|:---|
| å¤šèªç³»æ¡†æ¶ | æ•´åˆ `react-i18next`ï¼ŒUI æ–‡æ¡ˆå…¨éƒ¨æŠ½é›¢ç‚ºèªç³»æª” | P1 |
| ç¹ä¸­ / è‹±æ–‡åˆ‡æ› | é è¨­ç¹é«”ä¸­æ–‡ï¼Œå¯æ‰‹å‹•åˆ‡æ›è‹±æ–‡ | P1 |
| Prompt è‡ªå‹•ç¿»è­¯ | ä½¿ç”¨è€…è¼¸å…¥ä¸­æ–‡åŠ‡æƒ…ï¼Œç³»çµ±è‡ªå‹•ç”¢å‡ºè‹±æ–‡ Prompt é€ AI | P0 (å·²å…§å»º) |

#### ğŸ“Š å¯è§€æ¸¬æ€§ (Observability)

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
|:---|:---|:---|
| çµæ§‹åŒ–æ—¥èªŒ | Azure Functions æ­é… Application Insights è¨˜éŒ„æ‰€æœ‰ API å‘¼å« | P0 |
| å‰ç«¯éŒ¯èª¤è¿½è¹¤ | React Error Boundary + éŒ¯èª¤å›å ±è‡³å¾Œç«¯ | P0 |
| ä½¿ç”¨é‡å„€è¡¨æ¿ | çµ±è¨ˆæ¯æ—¥ API å‘¼å«æ•¸ã€ç”Ÿæˆåœ–ç‰‡æ•¸ã€ä½¿ç”¨è€…æ´»èºåº¦ | P1 |
| AI æˆæœ¬è¿½è¹¤ | è¨˜éŒ„æ¯æ¬¡ Gemini API å‘¼å«çš„ Token æ¶ˆè€—é‡èˆ‡ä¼°ç®—è²»ç”¨ | P1 |

#### ğŸ”„ è³‡æ–™é·ç§» (Data Migration)

| åŠŸèƒ½ | èªªæ˜ | å„ªå…ˆç´š |
|:---|:---|:---|
| Firestore â†’ PostgreSQL | æ’°å¯«ä¸€æ¬¡æ€§é·ç§»è…³æœ¬ï¼Œå°‡æ—¢æœ‰ä½¿ç”¨è€…è³‡æ–™æ¬è‡³æ–° DB | P0 |
| åœ–ç‰‡æ¬é· | Firestore Base64 â†’ Azure Blob Storage çœŸå¯¦åœ–æª” | P0 |
| å›é€€è¨ˆç•« | é·ç§»å¤±æ•—æ™‚å¯æ¢å¾©åŸ Firestore è³‡æ–™ | P0 |

---

## å››ã€æŠ€è¡“æ¶æ§‹é¸å‹ (Technical Stack)

æœ¬å°ˆæ¡ˆå°‡å¾ç¾æœ‰ Firebase åŸå‹é·ç§»è‡³ **Azure åŸºç¤è¨­æ–½ + Google AI æ™ºæ…§å¼•æ“** çš„ä¼æ¥­ç´šæ··åˆé›²æ¶æ§‹ã€‚

### 4.1 é›²ç«¯åŸºç¤è¨­æ–½ (Hosted on Azure)

| å±¤ç´š | æŠ€è¡“æ–¹æ¡ˆ | é¸æ“‡ç†ç”± |
| :--- | :--- | :--- |
| **Frontend Hosting** | **Azure Static Web Apps** | å°ˆç‚º React/Vite è¨­è¨ˆçš„ç¾ä»£åŒ– PaaSï¼Œå…§å»ºå…¨çƒ CDN åŠ é€Ÿèˆ‡ CI/CD æ•´åˆã€‚ |
| **Identity / Auth** | **Microsoft Entra ID** | æ”¯æ´ Microsoft 365 ä¼æ¥­å¸³è™Ÿ SSO ç™»å…¥ï¼Œç¬¦åˆå…¬å¸è³‡å®‰åˆè¦è¦ç¯„ã€‚ |
| **Backend Compute** | **Azure Functions** | Serverless æ¶æ§‹ (Node.js)ã€‚ä½œç‚ºã€ŒAI Proxyã€ä¿è­· API Key ä¸¦è½‰ç™¼è«‹æ±‚ã€‚ |
| **Database** | **Azure Database for PostgreSQL** | (Flexible Server) é…åˆ `JSONB` å„²å­˜è…³æœ¬ï¼Œä¸¦åˆ©ç”¨ `pgvector` å¯¦ä½œé¢¨æ ¼åº«å‘é‡æœå°‹ã€‚ |
| **Object Storage** | **Azure Blob Storage** | å„²å­˜ä¼æ¥­ä¸Šå‚³çš„åŸå§‹æ–‡ä»¶ (PDF/SOP) èˆ‡ AI ç”Ÿæˆçš„é«˜è§£æåº¦åœ–ç‰‡ã€‚ |

### 4.2 AI æ ¸å¿ƒå¼•æ“ (Powered by Gemini)

| åŠŸèƒ½æ¨¡çµ„ | æŒ‡å®šæ¨¡å‹ | æ‡‰ç”¨èªªæ˜ |
| :--- | :--- | :--- |
| **é€£çºŒåœ–ç‰‡ç”Ÿæˆ** | **gemini-3-pro-image-preview** | **æ ¸å¿ƒç”Ÿæˆå¼•æ“**ã€‚åˆ©ç”¨å¤šæ¨¡æ…‹ç”Ÿæˆèƒ½åŠ›ï¼Œç²¾æº–æ§åˆ¶è§’è‰²ä¸€è‡´æ€§èˆ‡å ´æ™¯ç´°ç¯€ã€‚ |
| **æ™ºæ…§æ–‡ä»¶åˆ†æ** | **gemini-3-pro-preview** | åˆ©ç”¨é•·æ–‡æœ¬ (2M+ Tokens) æ¨ç†èƒ½åŠ›ï¼Œä¸€æ¬¡è®€å–æ•´ä»½ PDF/SOP ä¸¦æå–åˆ†é¡ã€‚ |
| **é¢¨æ ¼åˆ†æ** | **gemini-3-pro-preview** | é‡å°åƒè€ƒåœ–é€²è¡Œé¢¨æ ¼ç‰¹å¾µæå–èˆ‡ Prompt å„ªåŒ–ã€‚ |

### 4.3 ç³»çµ±æ¶æ§‹æµç¨‹ (Architecture Flow)

```mermaid
sequenceDiagram
    participant User as React Frontend
    participant Auth as Entra ID
    participant API as Azure Functions
    participant DB as PostgreSQL
    participant File as Blob Storage
    participant AI as Google Gemini API

    User->>Auth: 1. SSO ç™»å…¥
    Auth-->>User: Token
    User->>API: 2. ä¸Šå‚³ PDF / ç™¼é€ Prompt
    API->>File: 3. æš«å­˜æ–‡ä»¶
    API->>AI: 4. å‘¼å« Gemini-3 (åˆ†æ/ç”Ÿæˆ)
    AI-->>API: 5. å›å‚³çµæœ/åœ–ç‰‡
    API->>File: 6. è½‰å­˜åœ–ç‰‡è‡³ Blob (ç§æœ‰åŒ–)
    API->>DB: 7. å¯«å…¥ Metadata & Log
    API-->>User: 8. å›å‚³æœ€çµ‚çµæœ
```

### 4.4 AI API å‘¼å«ç¯„ä¾‹ (Reference)

ä»¥ä¸‹ç‚º **gemini-3-pro-image-preview** çš„æ¨™æº– HTTP è«‹æ±‚ç¯„ä¾‹ï¼Œä¾› Azure Functions é–‹ç™¼åƒè€ƒï¼š

```http
POST https://aiplatform.googleapis.com/v1/projects/{projectId}/locations/global/publishers/google/models/gemini-3-pro-image-preview:generateContent
Content-Type: application/json
Authorization: Bearer <API_KEY>

{
  "contents": [
    {
      "role": "user",
      "parts": [
        {
          "text": "ä¸€éš»åœ¨å……æ»¿éœ“è™¹ç‡ˆçš„è³½åšé¾å…‹åŸå¸‚ä¸­å–å’–å•¡çš„è²“ï¼Œ4k é«˜ç•«è³ªï¼Œé›»å½±å…‰æ•ˆ"
        }
      ]
    }
  ]
}
```

---

## äº”ã€ä½¿ç”¨è€…é«”é©—æµç¨‹ (User Workflow)

```text
1. ä¸Šå‚³èˆ‡åˆ†æ (Upload & Analyze)
   [PDF/PPT æ–‡ä»¶] --> [Azure Blob] --> [Gemini 3 æ–‡ä»¶åˆ†æ] --> [åˆ†é¡è…³æœ¬è‰ç¨¿]

2. é¢¨æ ¼è¨­å®š (Configure Style)
   [åƒè€ƒåœ–/ä¼æ¥­ç¯„æœ¬] --> [Gemini 3 é¢¨æ ¼åˆ†æ] --> [è§’è‰²/é¢¨æ ¼é–å®šåƒæ•¸]

3. è…³æœ¬ç·¨è¼¯ (Edit Script)
   [React å‰ç«¯ç•«å¸ƒ] --> [èª¿æ•´æ¯å¼µåœ–çš„ Prompt èˆ‡ åˆ†é¡æè¿°]

4. æ‰¹æ¬¡ç”Ÿæˆ (Batch Generate)
   [ç¢ºèªè…³æœ¬] --> [Azure Functions] --> [Gemini 3 åœ–ç‰‡ç”Ÿæˆ] --> [Azure Blob]

5. å¯©è¦–èˆ‡äº¤ä»˜ (Review & Export)
   [é è¦½æ•…äº‹ç·š] --> [å¾®èª¿é‡ç¹ª] --> [ä¸‹è¼‰é«˜è§£æåœ–æª”]
```

---

## å…­ã€å°ˆæ¡ˆè½‰å‹è¨ˆç•« (Migration Execution)

ç‚ºå¾ç¾æœ‰ Firebase åŸå‹å¹³æ»‘é·ç§»è‡³ Azure ä¼æ¥­æ¶æ§‹ï¼Œæœ¬å°ˆæ¡ˆå°‡æ¡è¡Œ**åŸåœ°é‡æ§‹ (In-place Refactoring)** ç­–ç•¥ã€‚

> âš ï¸ **é—œéµæ´å¯Ÿ**ï¼šç¾æœ‰ç¨‹å¼ç¢¼æ˜¯ 969 è¡Œçš„å·¨å‹å–®é«”å…ƒä»¶ï¼Œå¿…é ˆ **å…ˆé‡æ§‹å‰ç«¯çµæ§‹ (Phase 0)**ï¼Œæ‰èƒ½å®‰å…¨åœ°æ›¿æ›å¾Œç«¯ã€‚å¦å‰‡åœ¨ Phase 1â€“3 ä¸­æ¯æ¬¡æ”¹å‹•éƒ½æœƒè¡çªä¸”é›£ä»¥æ¸¬è©¦ã€‚

---

### Phase 0: å‰ç«¯åŸºç¤é‡æ§‹ (Frontend Foundation) ğŸ—ï¸

> **ç›®æ¨™**ï¼šå°‡å·¨å‹å…ƒä»¶æ‹†è§£ç‚ºå¯çµ„åˆçš„æ¨¡çµ„åŒ–æ¶æ§‹ï¼Œå»ºç«‹ API æŠ½è±¡å±¤ï¼Œä½¿å¾Œç«¯å¯è¢«æ›¿æ›ã€‚  
> **åŸå‰‡**ï¼šæ­¤éšæ®µä¸æ”¹è®Šä»»ä½•æ¥­å‹™åŠŸèƒ½ï¼ŒFirebase ä»ç‚ºå¾Œç«¯ï¼Œç¢ºä¿éš¨æ™‚å¯ demoã€‚

åŸ·è¡Œç´°ç¯€è«‹åƒè€ƒ [docs/EXECUTION_DETAILS.md](docs/EXECUTION_DETAILS.md)ã€‚

è¨»ï¼šFirebase åƒ…ä½œç‚º Phase 0 éæ¸¡ä¾è³´ï¼ŒPhase 1 æœƒæ¸…é™¤ã€‚

#### Step 0.1 â€” å®‰è£ shadcn/ui èˆ‡å°ˆæ¡ˆçµæ§‹
- [ ] å®‰è£ DESIGN_GUIDELINE.md ä¸­è¦åŠƒçš„æ ¸å¿ƒ shadcn/ui å…ƒä»¶
- [ ] å»ºç«‹ç›®æ¨™ç›®éŒ„çµæ§‹ï¼š
  ```
  src/
  â”œâ”€â”€ components/
  â”‚   â”œâ”€â”€ ui/           â† shadcn/ui å…ƒä»¶
  â”‚   â”œâ”€â”€ layout/       â† Header, Sidebar, MainPanel
  â”‚   â”œâ”€â”€ create/       â† è£½ä½œå€ç›¸é—œå…ƒä»¶
  â”‚   â”œâ”€â”€ styles/       â† é¢¨æ ¼åº«ç›¸é—œå…ƒä»¶
  â”‚   â””â”€â”€ history/      â† æ­·å²ç´€éŒ„ç›¸é—œå…ƒä»¶
  â”œâ”€â”€ hooks/            â† useAuth, useStyles, useImageGen, useHistory
  â”œâ”€â”€ services/         â† API æŠ½è±¡å±¤ (apiClient, authService, aiService)
  â”œâ”€â”€ lib/              â† utils, constants
  â”œâ”€â”€ types/            â† TypeScript å‹åˆ¥ (è‹¥å•Ÿç”¨ TS)
  â””â”€â”€ pages/            â† è·¯ç”±é é¢å…ƒä»¶
  ```

#### Step 0.2 â€” æ‹†è§£ InfographicGenerator.jsx
- [ ] æŠ½å‡º `hooks/useAuth.js` â€” ç™»å…¥/ç™»å‡º/èªè­‰ç‹€æ…‹
- [ ] æŠ½å‡º `hooks/useStyles.js` â€” é¢¨æ ¼ CRUD èˆ‡ç‹€æ…‹
- [ ] æŠ½å‡º `hooks/useHistory.js` â€” æ­·å²ç´€éŒ„ CRUD
- [ ] æŠ½å‡º `hooks/useImageGeneration.js` â€” åˆ†æ + ç”Ÿæˆé‚è¼¯
- [ ] æ‹†åˆ† UI å…ƒä»¶ï¼š
  - `components/layout/AppHeader.jsx`
  - `components/create/StyleAnalyzer.jsx`
  - `components/create/ScriptEditor.jsx`
  - `components/create/ImagePreview.jsx`
  - `components/styles/StyleLibrary.jsx`
  - `components/styles/StyleCard.jsx`
  - `components/history/HistoryPanel.jsx`
  - `components/history/HistoryCard.jsx`

#### Step 0.3 â€” å»ºç«‹ API æŠ½è±¡å±¤
- [ ] å»ºç«‹ `services/apiClient.js` â€” çµ±ä¸€çš„ HTTP/SDK å‘¼å«ä»‹é¢
- [ ] å»ºç«‹ `services/authService.js` â€” èªè­‰ç›¸é—œ (ç›®å‰åŒ…è£ Firebase Authï¼Œä¹‹å¾Œæ› MSAL)
- [ ] å»ºç«‹ `services/aiService.js` â€” AI å‘¼å« (ç›®å‰åŒ…è£ Vertex AI SDKï¼Œä¹‹å¾Œæ”¹ Azure Functions)
- [ ] å»ºç«‹ `services/storageService.js` â€” è³‡æ–™å­˜å– (ç›®å‰åŒ…è£ Firestoreï¼Œä¹‹å¾Œæ”¹ REST API)
- [ ] æ‰€æœ‰ hooks æ”¹ç‚ºå‘¼å« service å±¤ï¼Œä¸å†ç›´æ¥ import Firebase SDK

#### Step 0.4 â€” åŸºç¤è¨­æ–½èˆ‡å“è³ª
- [ ] å®‰è£ React Router DOMï¼Œå¯¦ä½œåŸºæœ¬è·¯ç”± (`/`, `/styles`, `/history`)
- [ ] å®‰è£ React Error Boundaryï¼ŒåŒ…è£¹é ‚å±¤å…ƒä»¶
- [ ] è¨­å®š Vitest + React Testing Library
- [ ] ç‚ºæ¯å€‹ service æ’°å¯«åŸºç¤å–®å…ƒæ¸¬è©¦
- [ ] é©—è­‰ï¼šæ‹†åˆ†å¾Œæ‰€æœ‰ç¾æœ‰åŠŸèƒ½ä»æ­£å¸¸é‹ä½œï¼ˆå†’ç…™æ¸¬è©¦ï¼‰

---

### Phase 1: Auth & API Gateway (æ¸…ç† Firebase â†’ Azure) ğŸ”

> **å‰ç½®æ¢ä»¶**ï¼šPhase 0 å®Œæˆï¼ŒAPI æŠ½è±¡å±¤å·²åˆ°ä½ã€‚

åŸ·è¡Œç´°ç¯€è«‹åƒè€ƒ [docs/EXECUTION_DETAILS.md](docs/EXECUTION_DETAILS.md)ã€‚

#### Step 1.1 â€” æ¸…ç† Firebase ä¾è³´
- [ ] ç§»é™¤ `firebase` npm å¥—ä»¶
- [ ] åˆªé™¤ `firestore.rules`ã€`firebase.json`ï¼ˆå¦‚å­˜åœ¨ï¼‰
- [ ] åˆªé™¤ `vercel.json`ï¼Œæ”¹ç”¨ Azure Static Web Apps è¨­å®š (`staticwebapp.config.json`)
- [ ] ç§»é™¤ `src/config.js` ä¸­çš„ Firebase è¨­å®š

#### Step 1.2 â€” Azure Functions åˆå§‹åŒ–
- [ ] å»ºç«‹ `api/` ç›®éŒ„ï¼Œåˆå§‹åŒ– Azure Functions (Node.js v20+)
- [ ] å®‰è£ `@google/generative-ai`ã€`pg`ã€`@azure/storage-blob`
- [ ] å¯¦ä½œ `api/health/index.js` â€” Health check ç«¯é»
- [ ] è¨­å®šç’°å¢ƒè®Šæ•¸ç®¡ç†ï¼ˆAzure Key Vault / App Settingsï¼‰

#### Step 1.3 â€” å¯¦ä½œ MSAL èªè­‰
- [ ] å‰ç«¯å®‰è£ `@azure/msal-react` + `@azure/msal-browser`
- [ ] æ›´æ–° `services/authService.js`ï¼šFirebase Auth â†’ MSAL
- [ ] å¯¦ä½œ Azure Function middlewareï¼šé©—è­‰ Bearer Token + æ³¨å…¥ `user.uid`
- [ ] è¨­å®š CORSï¼šåƒ…å…è¨±å‰ç«¯ origin

#### Step 1.4 â€” API Gateway
- [ ] å¯¦ä½œ Rate Limiting middleware (æ¯åˆ†é˜ä¸Šé™)
- [ ] çµ±ä¸€éŒ¯èª¤å›å‚³æ ¼å¼ `{ error: { code, message } }`
- [ ] æ›´æ–° `services/apiClient.js`ï¼šåŠ å…¥ Token è‡ªå‹•é™„åŠ èˆ‡ 401 é‡è©¦é‚è¼¯

---

### Phase 2: Database & Storage ğŸ’¾

> **å‰ç½®æ¢ä»¶**ï¼šPhase 1 å®Œæˆï¼ŒAPI Gateway å¯é©—è­‰ Tokenã€‚

åŸ·è¡Œç´°ç¯€è«‹åƒè€ƒ [docs/EXECUTION_DETAILS.md](docs/EXECUTION_DETAILS.md)ã€‚

#### Step 2.1 â€” PostgreSQL å»ºç½®
- [ ] å»ºç«‹ Azure Database for PostgreSQL (Flexible Server)
- [ ] æ’°å¯« Migration è…³æœ¬ï¼š`users`ã€`projects`ã€`scenes`ã€`styles` è¡¨
- [ ] å•Ÿç”¨ `pgvector` æ“´å……å¥—ä»¶ï¼Œå»ºç«‹é¢¨æ ¼å‘é‡ç´¢å¼•
- [ ] è¨­å®š Connection Pool (æœ€å¤§é€£ç·šæ•¸ã€é€¾æ™‚)

#### Step 2.2 â€” Blob Storage å»ºç½®
- [ ] å»ºç«‹ Azure Blob Storage å®¹å™¨ (`uploads`ã€`generated`ã€`thumbnails`)
- [ ] å¯¦ä½œ SAS Token ç°½ç™¼ Azure Function
- [ ] å¯¦ä½œæª”æ¡ˆæ ¼å¼èˆ‡å¤§å°é©—è­‰ (ç™½åå–® + 50MB ä¸Šé™)
- [ ] å¯¦ä½œè‡ªå‹•ç¸®åœ–ç”Ÿæˆ (â‰¤ 400pxï¼Œç”¨æ–¼åˆ—è¡¨é è¦½)

#### Step 2.3 â€” è³‡æ–™é·ç§»
- [ ] æ’°å¯«ä¸€æ¬¡æ€§é·ç§»è…³æœ¬ï¼šFirestore â†’ PostgreSQL
- [ ] é·ç§»åœ–ç‰‡ï¼šFirestore Base64 â†’ Blob Storage çœŸå¯¦æª”æ¡ˆ
- [ ] é©—è­‰è³‡æ–™å®Œæ•´æ€§ï¼ˆæ¯”å°ç­†æ•¸ + æŠ½æ¨£å…§å®¹ï¼‰
- [ ] å»ºç«‹å›é€€è¨ˆç•«ï¼šä¿ç•™ Firestore è®€å–èƒ½åŠ› 30 å¤©

#### Step 2.4 â€” æ›´æ–°å‰ç«¯ Service å±¤
- [ ] æ›´æ–° `services/storageService.js`ï¼šFirestore â†’ REST API (`/api/styles`, `/api/history`)
- [ ] æ›´æ–°åœ–ç‰‡ä¸Šå‚³æµç¨‹ï¼šBase64 â†’ SAS Token ç›´å‚³ Blob

---

### Phase 3: AI Core Integration ğŸ¤–

> **å‰ç½®æ¢ä»¶**ï¼šPhase 2 å®Œæˆï¼Œå‰ç«¯å·²åˆ‡æ›è‡³ REST APIã€‚

åŸ·è¡Œç´°ç¯€è«‹åƒè€ƒ [docs/EXECUTION_DETAILS.md](docs/EXECUTION_DETAILS.md)ã€‚

#### Step 3.1 â€” æ–‡ä»¶åˆ†æ Function
- [ ] å¯¦ä½œ `api/analyze-document/index.js`
- [ ] ä½¿ç”¨ `@google/generative-ai` â†’ `gemini-3-pro-preview`
- [ ] æ”¯æ´ PDFã€DOCXã€PPTXã€TXT/MD æ ¼å¼ï¼ˆBlob URL è¼¸å…¥ï¼‰
- [ ] å›å‚³çµæ§‹åŒ–åˆ†é¡ JSON

#### Step 3.2 â€” åœ–ç‰‡ç”Ÿæˆ Function
- [ ] å¯¦ä½œ `api/generate-images/index.js`
- [ ] ä½¿ç”¨ `gemini-3-pro-image-preview` æ¨¡å‹
- [ ] æ”¯æ´é•·å¯¬æ¯”åƒæ•¸ (16:9 / 4:3 / 1:1 / 9:16)
- [ ] ç”Ÿæˆå®Œæˆå¾Œè‡ªå‹•å­˜å…¥ Blob + å¯«å…¥ DB Metadata
- [ ] å¯¦ä½œå¤±æ•—é‡è©¦ (æœ€å¤š 3 æ¬¡ + exponential backoff)

#### Step 3.3 â€” é¢¨æ ¼åˆ†æ Function  
- [ ] å¯¦ä½œ `api/analyze-style/index.js`
- [ ] é·ç§»ç¾æœ‰å‰ç«¯ Vertex AI åˆ†æé‚è¼¯è‡³å¾Œç«¯
- [ ] æ›´æ–° `services/aiService.js`ï¼šVertex AI SDK â†’ REST API

#### Step 3.4 â€” å®‰å…¨å¼·åŒ–
- [ ] ç¢ºèªæ‰€æœ‰ AI API Key åƒ…å­˜åœ¨ Azure Functions ç’°å¢ƒè®Šæ•¸
- [ ] å¯¦ä½œ Prompt æ•æ„Ÿè©å‰ç½®éæ¿¾
- [ ] è¨­å®š Gemini Safety Settings (BLOCK_MEDIUM_AND_ABOVE)
- [ ] å‰ç«¯ç¨‹å¼ç¢¼æƒæï¼šç¢ºèªé›¶ API Key å¤–æ´©

---

### Phase 4: ä¼æ¥­ç´šåŠŸèƒ½èˆ‡ Polish ğŸ¢

> **å‰ç½®æ¢ä»¶**ï¼šPhase 1â€“3 å®Œæˆï¼Œæ ¸å¿ƒåŠŸèƒ½ç©©å®šã€‚

åŸ·è¡Œç´°ç¯€è«‹åƒè€ƒ [docs/EXECUTION_DETAILS.md](docs/EXECUTION_DETAILS.md)ã€‚

- [ ] å¤šç§Ÿæˆ¶è³‡æ–™éš”é›¢ (Tenant-based Row Level Security)
- [ ] è§’è‰²æ¬Šé™æ§åˆ¶ (ç®¡ç†å“¡ / ç·¨è¼¯è€… / æª¢è¦–è€…)
- [ ] ç”¨é‡é…é¡ç®¡ç† (æ¯æœˆ API ç”¨é‡ä¸Šé™ + å„€è¡¨æ¿)
- [ ] i18n åœ‹éš›åŒ– (react-i18next)
- [ ] æ‰¹æ¬¡ç”Ÿæˆä½‡åˆ— (Azure Queue + é€²åº¦ Webhook)
- [ ] å°ˆæ¡ˆè³‡æ–™å¤¾èˆ‡æ‰¹æ¬¡åŒ¯å‡º
- [ ] Application Insights ç›£æ§æ•´åˆ
- [ ] CI/CD Pipeline (GitHub Actions â†’ Azure Static Web Apps + Functions)

---

## ä¸ƒã€åŠŸèƒ½é©—è­‰è¨ˆç•« (Verification & Acceptance)

> æ¯å€‹ Phase é–‹ç™¼å®Œæˆå¾Œï¼Œéœ€ä¾ç…§ä»¥ä¸‹é©—è­‰æ¸…å–®é€é …ç¢ºèªï¼Œå…¨æ•¸é€šéæ–¹å¯é€²å…¥ä¸‹ä¸€éšæ®µã€‚  
> é©—è­‰æ–¹å¼åˆ†ç‚ºï¼š**è‡ªå‹•æ¸¬è©¦ (A)**ã€**æ‰‹å‹•æ¸¬è©¦ (M)**ã€**ç¨‹å¼ç¢¼å¯©æŸ¥ (R)**ã€‚

### 7.0 Phase 0 é©—è­‰ï¼šå‰ç«¯åŸºç¤é‡æ§‹

| # | é©—è­‰é …ç›® | é©—è­‰æ–¹å¼ | é æœŸçµæœ | é€šé |
|:--|:---|:---:|:---|:---:|
| F-01 | å…ƒä»¶æ‹†åˆ†å®Œæ•´æ€§ | R | `InfographicGenerator.jsx` ä¸å­˜åœ¨æˆ–åƒ…ç‚º Page Wrapperï¼ˆ< 50 è¡Œï¼‰ | [ ] |
| F-02 | Service å±¤è§£è€¦ | R | `components/` å…§ç„¡ç›´æ¥ import `firebase/*`ï¼Œä¸€å¾‹é€é `services/` | [ ] |
| F-03 | å†’ç…™æ¸¬è©¦ | M | é¢¨æ ¼åˆ†æ â†’ ç”Ÿæˆåœ–ç‰‡ â†’ å­˜æ­·å² â†’ è®€æ­·å² â†’ åˆªæ­·å² â†’ çš†æ­£å¸¸ | [ ] |
| F-04 | è·¯ç”±å°èˆª | M | ç€è¦½å™¨ç›´æ¥å­˜å– `/styles` å¯åˆ°é¢¨æ ¼åº«é é¢ï¼Œé‡æ–°æ•´ç†ä¸ 404 | [ ] |
| F-05 | Error Boundary | M | æ•…æ„è®“å­å…ƒä»¶æ‹‹å‡ºéŒ¯èª¤ â†’ é¡¯ç¤º Fallback UIï¼Œä¸ç™½å± | [ ] |
| F-06 | Vitest å¯åŸ·è¡Œ | A | `npm test` é€šéæ‰€æœ‰ service å±¤åŸºç¤æ¸¬è©¦ | [ ] |
| F-07 | shadcn/ui å…ƒä»¶è¼‰å…¥ | M | Button, Card, Dialog, Tabs ç­‰å…ƒä»¶æ­£å¸¸æ¸²æŸ“ | [ ] |

---

### 7.1 Phase 1 é©—è­‰ï¼šAuth & API Gateway

#### 7.1.1 èº«ä»½é©—è­‰ (Authentication)

| # | é©—è­‰é …ç›® | é©—è­‰æ–¹å¼ | é æœŸçµæœ | é€šé |
|:--|:---|:---:|:---|:---:|
| A-01 | Microsoft SSO ç™»å…¥æµç¨‹ | M | é»æ“Šç™»å…¥ â†’ å°å‘ Microsoft ç™»å…¥é  â†’ æˆåŠŸå›èª¿ â†’ é¡¯ç¤ºä½¿ç”¨è€…åç¨±èˆ‡é ­è²¼ | [ ] |
| A-02 | Tenant é™åˆ¶ | M | è¨­å®š `MICROSOFT_TENANT_ID` å¾Œï¼Œåƒ…è©²çµ„ç¹”å¸³è™Ÿå¯ç™»å…¥ï¼›å¤–éƒ¨å¸³è™Ÿè¢«æ‹’çµ•ä¸¦é¡¯ç¤ºéŒ¯èª¤ | [ ] |
| A-03 | ç™»å‡ºæµç¨‹ | M | é»æ“Šç™»å‡º â†’ æ¸…é™¤ Token â†’ UI å›åˆ°æœªç™»å…¥ç‹€æ…‹ | [ ] |
| A-04 | Token éæœŸè‡ªå‹•é‡æ–°æ•´ç† | M | é•·æ™‚é–“æ›ç½®å¾Œæ“ä½œï¼ŒMSAL è‡ªå‹•ä»¥ refresh token å–å¾—æ–° access tokenï¼Œä¸ä¸­æ–·ä½¿ç”¨ | [ ] |
| A-05 | æœªç™»å…¥å­˜å–ä¿è­· | A | æœªå¸¶ Token å‘¼å« `/api/*` â†’ å›å‚³ `401 Unauthorized` | [ ] |
| A-06 | ç„¡æ•ˆ Token æ‹’çµ• | A | å¸¶éæœŸæˆ–ç«„æ”¹çš„ Token â†’ å›å‚³ `401`ï¼Œresponse body åŒ…å«éŒ¯èª¤æè¿° | [ ] |

#### 7.1.2 API Gateway

| # | é©—è­‰é …ç›® | é©—è­‰æ–¹å¼ | é æœŸçµæœ | é€šé |
|:--|:---|:---:|:---|:---:|
| G-01 | Health check ç«¯é» | A | `GET /api/health` â†’ `200 { status: "ok" }` | [ ] |
| G-02 | Token é©—è­‰ä¸­ä»‹å±¤ | A | åˆæ³• Token â†’ request ä¸­æ³¨å…¥ `user.uid` èˆ‡ `user.email` | [ ] |
| G-03 | CORS è¨­å®š | A | åƒ…å…è¨±å‰ç«¯ originï¼›å…¶ä»– origin è¢«æ‹’ | [ ] |
| G-04 | Rate limiting | A | åŒä¸€ä½¿ç”¨è€… 1 åˆ†é˜è¶…éä¸Šé™ â†’ å›å‚³ `429 Too Many Requests` | [ ] |
| G-05 | éŒ¯èª¤å›å‚³æ ¼å¼ä¸€è‡´ | R | æ‰€æœ‰ API éŒ¯èª¤å›å‚³ `{ error: { code, message } }` çµ±ä¸€çµæ§‹ | [ ] |

---

### 7.2 Phase 2 é©—è­‰ï¼šDatabase & Storage

#### 7.2.1 è³‡æ–™åº« (PostgreSQL)

| # | é©—è­‰é …ç›® | é©—è­‰æ–¹å¼ | é æœŸçµæœ | é€šé |
|:--|:---|:---:|:---|:---:|
| D-01 | Schema é·ç§»è…³æœ¬ | A | åŸ·è¡Œ migration â†’ å»ºç«‹ `users`ã€`projects`ã€`scenes`ã€`styles` è¡¨ â†’ ç„¡éŒ¯èª¤ | [ ] |
| D-02 | å¤šç§Ÿæˆ¶è³‡æ–™éš”é›¢ | A | ä½¿ç”¨è€… A å»ºç«‹çš„å°ˆæ¡ˆï¼Œä½¿ç”¨è€… B æŸ¥è©¢ä¸åˆ°ï¼ˆå³ä½¿ç›´æ¥æ“ä½œ APIï¼‰ | [ ] |
| D-03 | JSONB å ´æ™¯å„²å­˜ | A | å¯«å…¥åˆ†é¡è…³æœ¬ï¼ˆå«ä¸­æ–‡ã€ç‰¹æ®Šå­—å…ƒã€emojiï¼‰ â†’ è®€å–å®Œæ•´é‚„åŸ | [ ] |
| D-04 | pgvector é¢¨æ ¼æœå°‹ | A | æ’å…¥ 5 å€‹é¢¨æ ¼å‘é‡ â†’ ä»¥ç›®æ¨™å‘é‡æŸ¥è©¢ â†’ å›å‚³å‰ 3 ç›¸ä¼¼ä¸”æ’åºæ­£ç¢º | [ ] |
| D-05 | é€£ç·šæ± èˆ‡è¶…æ™‚ | A | æ¨¡æ“¬ 50 ä½µç™¼é€£ç·š â†’ ç„¡ connection leakã€æ‰€æœ‰è«‹æ±‚åœ¨ 5 ç§’å…§å›æ‡‰ | [ ] |
| D-06 | è³‡æ–™å‚™ä»½æ©Ÿåˆ¶ | R | ç¢ºèªå·²é–‹å•Ÿ Azure è‡ªå‹•å‚™ä»½ï¼Œä¿ç•™å¤©æ•¸ â‰¥ 7 å¤© | [ ] |

#### 7.2.2 ç‰©ä»¶å„²å­˜ (Blob Storage)

| # | é©—è­‰é …ç›® | é©—è­‰æ–¹å¼ | é æœŸçµæœ | é€šé |
|:--|:---|:---:|:---|:---:|
| S-01 | SAS Token ä¸Šå‚³ | A | å‰ç«¯å–å¾— SAS Token â†’ ç›´æ¥ä¸Šå‚³è‡³ Blob â†’ å›å‚³æˆåŠŸ URL | [ ] |
| S-02 | SAS Token éæœŸ | A | ä½¿ç”¨éæœŸ SAS Token ä¸Šå‚³ â†’ å›å‚³ `403 Forbidden` | [ ] |
| S-03 | æª”æ¡ˆæ ¼å¼é™åˆ¶ | A | ä¸Šå‚³ `.exe` â†’ è¢«æ‹’ï¼›ä¸Šå‚³ `.pdf`ã€`.docx`ã€`.pptx`ã€`.png`ã€`.jpg` â†’ æˆåŠŸ | [ ] |
| S-04 | æª”æ¡ˆå¤§å°é™åˆ¶ | A | ä¸Šå‚³è¶…é 50MB çš„æª”æ¡ˆ â†’ è¢«æ‹’ä¸¦é¡¯ç¤ºæ˜ç¢ºéŒ¯èª¤è¨Šæ¯ | [ ] |
| S-05 | ç§æœ‰åŒ–å­˜å– | M | ç”Ÿæˆçš„åœ–ç‰‡ URL ä¸å¯å…¬é–‹å­˜å–ï¼›éœ€ç¶“ API è½‰ç™¼æˆ–å¸¶ SAS Token | [ ] |
| S-06 | åœ–ç‰‡å£“ç¸®èˆ‡ç¸®åœ– | A | ä¸Šå‚³åŸåœ–å¾Œï¼Œç³»çµ±è‡ªå‹•ç”¢ç”Ÿç¸®åœ–ï¼ˆâ‰¤ 400px å¯¬ï¼‰ç”¨æ–¼æ­·å²åˆ—è¡¨ | [ ] |

---

### 7.3 Phase 3 é©—è­‰ï¼šAI Core Integration

#### 7.3.1 æ–‡ä»¶åˆ†æ (`analyze-document`)

| # | é©—è­‰é …ç›® | é©—è­‰æ–¹å¼ | é æœŸçµæœ | é€šé |
|:--|:---|:---:|:---|:---:|
| AI-01 | PDF æ–‡ä»¶åˆ†æ | M | ä¸Šå‚³ 3 é  PDF â†’ å›å‚³ JSON åˆ†é¡è…³æœ¬ï¼Œå« â‰¥ 3 å€‹å ´æ™¯æè¿° | [ ] |
| AI-02 | Word æ–‡ä»¶åˆ†æ | M | ä¸Šå‚³ `.docx` â†’ æ­£ç¢ºè­˜åˆ¥æ¨™é¡Œã€æ¢åˆ—ã€æ®µè½çµæ§‹ | [ ] |
| AI-03 | PPT æ–‡ä»¶åˆ†æ | M | ä¸Šå‚³ `.pptx` â†’ æ¯å¼µæŠ•å½±ç‰‡å°æ‡‰ä¸€å€‹å ´æ™¯ | [ ] |
| AI-04 | ç´”æ–‡å­—åˆ†æ | M | ä¸Šå‚³ `.txt` / `.md` â†’ ä¾æ®µè½åˆ‡åˆ†å ´æ™¯ | [ ] |
| AI-05 | ä¸­æ–‡å…§å®¹è™•ç† | M | å…¨ä¸­æ–‡æ–‡ä»¶ â†’ Prompt ç¿»è­¯æ­£ç¢ºã€å ´æ™¯æè¿°èªç¾©ç„¡æ | [ ] |
| AI-06 | å¤§æª”æ¡ˆè™•ç† | M | ä¸Šå‚³ 50 é  PDF â†’ åœ¨ 60 ç§’å…§å›å‚³çµæœï¼Œä¸è¶…æ™‚ | [ ] |
| AI-07 | éŒ¯èª¤è™•ç† | A | ä¸Šå‚³æå£æª”æ¡ˆ â†’ å›å‚³å‹å–„éŒ¯èª¤è¨Šæ¯ï¼Œä¸ crash | [ ] |
| AI-08 | API Key ä¸å¤–æ´© | R | å‰ç«¯ç¨‹å¼ç¢¼ä¸­ä¸å«ä»»ä½• Gemini API Keyï¼Œå…¨éƒ¨ç¶“ Azure Functions ä»£ç† | [ ] |

#### 7.3.2 é¢¨æ ¼åˆ†æ

| # | é©—è­‰é …ç›® | é©—è­‰æ–¹å¼ | é æœŸçµæœ | é€šé |
|:--|:---|:---:|:---|:---:|
| ST-01 | åƒè€ƒåœ–é¢¨æ ¼æå– | M | ä¸Šå‚³æ‰å¹³æ’ç•«é¢¨ â†’ å›å‚³å« `style_name`ã€`style_description_zh`ã€`style_prompt_en`ã€`suggested_tags` | [ ] |
| ST-02 | å¤šé¢¨æ ¼å€åˆ† | M | åˆ†åˆ¥ä¸Šå‚³æ°´å½©ã€3Dã€åƒç´ é¢¨æ ¼ â†’ ä¸‰æ¬¡åˆ†æçµæœæ˜é¡¯ä¸åŒ | [ ] |
| ST-03 | é¢¨æ ¼æ”¶è— CRUD | A | å»ºç«‹ â†’ åˆ—è¡¨å¯è¦‹ â†’ ä¿®æ”¹åç¨± â†’ åˆªé™¤ â†’ åˆ—è¡¨ç§»é™¤ | [ ] |
| ST-04 | é¢¨æ ¼å¥—ç”¨ | M | å¾é¢¨æ ¼åº«é»æ“Šå¥—ç”¨ â†’ è‡ªå‹•å¡«å…¥ style prompt â†’ ç”Ÿæˆåœ–ç‰‡é¢¨æ ¼ä¸€è‡´ | [ ] |

#### 7.3.3 åœ–ç‰‡ç”Ÿæˆ (`generate-images`)

| # | é©—è­‰é …ç›® | é©—è­‰æ–¹å¼ | é æœŸçµæœ | é€šé |
|:--|:---|:---:|:---|:---:|
| IG-01 | å–®å¼µåœ–ç‰‡ç”Ÿæˆ | M | è¼¸å…¥ Prompt + é¢¨æ ¼ â†’ 10 ç§’å…§å›å‚³åœ–ç‰‡ â†’ åœ–ç‰‡å¯æ­£å¸¸é¡¯ç¤º | [ ] |
| IG-02 | é•·å¯¬æ¯” 16:9 | M | è¨­å®š 16:9 â†’ ç”Ÿæˆåœ–ç‰‡å¯¬é«˜æ¯”ç´„ 1.78:1 (Â±5% å®¹å·®) | [ ] |
| IG-03 | é•·å¯¬æ¯” 4:3 | M | è¨­å®š 4:3 â†’ ç”Ÿæˆåœ–ç‰‡å¯¬é«˜æ¯”ç´„ 1.33:1 | [ ] |
| IG-04 | é•·å¯¬æ¯” 1:1 | M | è¨­å®š 1:1 â†’ ç”Ÿæˆåœ–ç‰‡å¯¬é«˜æ¯”ç´„ 1:1 | [ ] |
| IG-05 | é•·å¯¬æ¯” 9:16 | M | è¨­å®š 9:16 â†’ ç”Ÿæˆåœ–ç‰‡å¯¬é«˜æ¯”ç´„ 0.56:1 | [ ] |
| IG-06 | æ‰¹æ¬¡ç”Ÿæˆ (3 å¼µ) | M | æäº¤ 3 å¼µåˆ†é¡ â†’ å…¨éƒ¨ç”Ÿæˆå®Œæˆ â†’ é †åºæ­£ç¢º â†’ é¢¨æ ¼ä¸€è‡´ | [ ] |
| IG-07 | æ‰¹æ¬¡ç”Ÿæˆ (10 å¼µ) | M | æäº¤ 10 å¼µåˆ†é¡ â†’ å…¨éƒ¨æˆåŠŸ â†’ ç¸½è€—æ™‚ â‰¤ 3 åˆ†é˜ | [ ] |
| IG-08 | ç”Ÿæˆå¤±æ•—é‡è©¦ | A | æ¨¡æ“¬ AI API è¿”å› 500 â†’ è‡ªå‹•é‡è©¦æœ€å¤š 3 æ¬¡ â†’ ä»å¤±æ•—æ™‚å›å‚³å‹å–„éŒ¯èª¤ | [ ] |
| IG-09 | ç”Ÿæˆæ­·å²å„²å­˜ | A | ç”Ÿæˆå®Œæˆ â†’ è‡ªå‹•å¯«å…¥ DB + Blob â†’ æ­·å²åˆ—è¡¨å¯è¦‹ â†’ å¯é‡æ–°è¼‰å…¥ | [ ] |
| IG-10 | åœ–ç‰‡ä¸‹è¼‰ | M | é»æ“Šä¸‹è¼‰ â†’ ç€è¦½å™¨ä¸‹è¼‰ `.png` æª”æ¡ˆ â†’ æª”æ¡ˆå¯é–‹å•Ÿä¸”ç•«è³ªæ­£å¸¸ | [ ] |

---

### 7.4 è·¨ Phase é©—è­‰ï¼šUI & é«”é©—

#### 7.4.1 éŸ¿æ‡‰å¼è¨­è¨ˆ (RWD)

| # | é©—è­‰é …ç›® | é©—è­‰æ–¹å¼ | é æœŸçµæœ | é€šé |
|:--|:---|:---:|:---|:---:|
| U-01 | æ¡Œæ©Ÿç‰ˆä½ˆå±€ (â‰¥ 1280px) | M | å·¦å´æ§åˆ¶é¢æ¿ + å³å´é è¦½é¢æ¿ï¼Œä¸¦æ’é¡¯ç¤º | [ ] |
| U-02 | å¹³æ¿ç‰ˆä½ˆå±€ (768pxâ€“1279px) | M | åŒæ¡Œæ©Ÿä½†æ§åˆ¶é¢æ¿ç•¥çª„ï¼Œå…§å®¹ä¸æº¢å‡º | [ ] |
| U-03 | æ‰‹æ©Ÿç‰ˆä½ˆå±€ (< 768px) | M | å‚ç›´å †ç–Šï¼Œæ§åˆ¶é¢æ¿ä¸Šæ–¹ã€é è¦½ä¸‹æ–¹ | [ ] |
| U-04 | æ‰‹æ©Ÿè¼¸å…¥ç„¦é» | M | é»æ“Š Textarea â†’ æ§åˆ¶é¢æ¿å±•é–‹å…¨å± â†’ é è¦½é¢æ¿éš±è— â†’ å¤±ç„¦å¾Œæ¢å¾© | [ ] |
| U-05 | å…§å®¹ä¸æ°´å¹³æº¢å‡º | M | æ‰€æœ‰æ–·é»ä¸‹ç„¡æ°´å¹³æ²è»¸ | [ ] |

#### 7.4.2 å…ƒä»¶è¡Œç‚º

| # | é©—è­‰é …ç›® | é©—è­‰æ–¹å¼ | é æœŸçµæœ | é€šé |
|:--|:---|:---:|:---|:---:|
| C-01 | æŒ‰éˆ• disabled ç‹€æ…‹ | M | æ‰€æœ‰æŒ‰éˆ•åœ¨ä¸å¯æ“ä½œæ™‚é¡¯ç¤º disabled æ¨£å¼ä¸”ä¸å¯é»æ“Š | [ ] |
| C-02 | Loading å›é¥‹ | M | æ‰€æœ‰éåŒæ­¥æ“ä½œæœŸé–“é¡¯ç¤º Spinner æˆ– Skeleton | [ ] |
| C-03 | ç©ºç‹€æ…‹å¼•å° | M | é¢¨æ ¼åº«/æ­·å²ç‚ºç©ºæ™‚é¡¯ç¤ºå¼•å°æ–‡æ¡ˆ | [ ] |
| C-04 | éŒ¯èª¤æç¤º | M | API éŒ¯èª¤ â†’ é¡¯ç¤º Alert å…ƒä»¶ï¼Œæ–‡æ¡ˆå‹å–„ä¸”å¯é—œé–‰ | [ ] |
| C-05 | åœ–ç‰‡ä¸Šå‚³é è¦½ | M | é¸æ“‡åœ–ç‰‡ â†’ ç«‹å³é¡¯ç¤ºé è¦½ â†’ å¯æ¸…é™¤ â†’ æ¸…é™¤å¾Œå›åˆ°ä¸Šå‚³ä»‹é¢ | [ ] |
| C-06 | Tab åˆ‡æ› | M | é»æ“Šè£½ä½œå€/é¢¨æ ¼åº«/ç´€éŒ„ â†’ å…§å®¹æ­£ç¢ºåˆ‡æ› â†’ é¸ä¸­ Tab æœ‰æ˜ç¢ºè¦–è¦ºæŒ‡ç¤º | [ ] |
| C-07 | æœå°‹éæ¿¾ | M | åœ¨é¢¨æ ¼åº«/æ­·å²è¼¸å…¥é—œéµå­— â†’ å³æ™‚éæ¿¾çµæœ â†’ æ¸…ç©ºæœå°‹æ¢å¾©å…¨éƒ¨ | [ ] |

#### 7.4.3 æ•ˆèƒ½

| # | é©—è­‰é …ç›® | é©—è­‰æ–¹å¼ | é æœŸçµæœ | é€šé |
|:--|:---|:---:|:---|:---:|
| P-01 | é¦–æ¬¡è¼‰å…¥æ•ˆèƒ½ | A | Lighthouse Performance â‰¥ 80 åˆ† | [ ] |
| P-02 | Bundle å¤§å° | A | ä¸»è¦ JS bundle gzipped â‰¤ 300KB | [ ] |
| P-03 | LCP (æœ€å¤§å…§å®¹ç¹ªè£½) | A | â‰¤ 2.5 ç§’ | [ ] |
| P-04 | CLS (ç´¯ç©ç‰ˆé¢åç§») | A | â‰¤ 0.1 | [ ] |
| P-05 | API å›æ‡‰æ™‚é–“ | A | é AI ç«¯é» P95 â‰¤ 500ms | [ ] |

#### 7.4.4 å®‰å…¨æ€§

| # | é©—è­‰é …ç›® | é©—è­‰æ–¹å¼ | é æœŸçµæœ | é€šé |
|:--|:---|:---:|:---|:---:|
| SEC-01 | XSS é˜²è­· | A | åœ¨ Prompt è¼¸å…¥ `<script>alert(1)</script>` â†’ è¢«è½‰ç¾©æˆ–éæ¿¾ï¼Œä¸åŸ·è¡Œ | [ ] |
| SEC-02 | CSRF é˜²è­· | R | API é©—è­‰ Origin header æˆ–ä½¿ç”¨ anti-CSRF Token | [ ] |
| SEC-03 | API Key å®‰å…¨ | R | Gemini API Key åƒ…å­˜åœ¨ Azure Functions ç’°å¢ƒè®Šæ•¸ï¼Œä¸å‡ºç¾åœ¨å‰ç«¯ç¨‹å¼ç¢¼æˆ– Git æ­·å² | [ ] |
| SEC-04 | æ•æ„Ÿè³‡æ–™æ—¥èªŒ | R | ä¼ºæœå™¨æ—¥èªŒä¸è¨˜éŒ„ä½¿ç”¨è€…ä¸Šå‚³å…§å®¹ã€Tokenã€å¯†ç¢¼ç­‰æ•æ„Ÿè³‡è¨Š | [ ] |
| SEC-05 | HTTPS å¼·åˆ¶ | A | HTTP è«‹æ±‚è‡ªå‹•å°å‘ HTTPSï¼Œç„¡æ··åˆå…§å®¹è­¦å‘Š | [ ] |

#### 7.4.5 ç„¡éšœç¤™ (Accessibility)

| # | é©—è­‰é …ç›® | é©—è­‰æ–¹å¼ | é æœŸçµæœ | é€šé |
|:--|:---|:---:|:---|:---:|
| ACC-01 | éµç›¤å°èˆª | M | ç´”éµç›¤ (Tab/Enter/Escape) å¯å®Œæˆå®Œæ•´æ“ä½œæµç¨‹ | [ ] |
| ACC-02 | è¢å¹•é–±è®€å™¨ | M | ä½¿ç”¨ NVDA/VoiceOver å¯æ­£ç¢ºæœ—è®€æ‰€æœ‰äº’å‹•å…ƒç´  | [ ] |
| ACC-03 | è‰²å½©å°æ¯”åº¦ | A | æ‰€æœ‰æ–‡å­—/èƒŒæ™¯çµ„åˆ â‰¥ 4.5:1 (WCAG AA) | [ ] |
| ACC-04 | åœ–ç‰‡ Alt æ–‡å­— | R | æ‰€æœ‰ `<img>` æ¨™ç±¤æœ‰èªç¾©åŒ– `alt` å±¬æ€§ | [ ] |
| ACC-05 | Focus æŒ‡ç¤ºå™¨ | M | æ‰€æœ‰å¯äº’å‹•å…ƒç´ æœ‰å¯è¦‹çš„ focus ring | [ ] |

---

### 7.5 é©—è­‰åŸ·è¡Œè¦ç¯„

#### é©—è­‰æµç¨‹

```text
1. é–‹ç™¼å®Œæˆ â†’ è‡ªè¡Œè·‘é€šè‡ªå‹•æ¸¬è©¦ (A) + æ‰‹å‹•æ¸¬è©¦ (M)
2. æäº¤ PR â†’ Code Review (R) é …ç›®ç”±å¯©æŸ¥è€…ç¢ºèª
3. æ‰€æœ‰é …ç›®é€šé â†’ æ¨™è¨˜ Phase å®Œæˆ â†’ é€²å…¥ä¸‹ä¸€ Phase
4. ä»»ä¸€é …ç›®å¤±æ•— â†’ é–‹ Issue è¿½è¹¤ â†’ ä¿®å¾©å¾Œé‡æ–°é©—è­‰
```

#### è‡ªå‹•åŒ–æ¸¬è©¦å·¥å…·

| é¡å‹ | å·¥å…· | ç”¨é€” |
|:---|:---|:---|
| **å–®å…ƒæ¸¬è©¦** | Vitest | å•†æ¥­é‚è¼¯ã€å·¥å…·å‡½å¼ |
| **API æ¸¬è©¦** | Vitest + supertest / REST Client | Azure Functions ç«¯é»é©—è­‰ |
| **E2E æ¸¬è©¦** | Playwright | å®Œæ•´ä½¿ç”¨è€…æµç¨‹ã€è·¨ç€è¦½å™¨é©—è­‰ |
| **æ•ˆèƒ½æ¸¬è©¦** | Lighthouse CI | Core Web Vitals è‡ªå‹•æª¢æ¸¬ |
| **ç„¡éšœç¤™æ¸¬è©¦** | axe-core / Lighthouse | WCAG AA åˆè¦è‡ªå‹•æƒæ |
| **å®‰å…¨æƒæ** | npm audit + GitHub Dependabot | ç›¸ä¾å¥—ä»¶æ¼æ´åµæ¸¬ |

#### é©—æ”¶æ¨™æº–

| ç­‰ç´š | æ¨™æº– | èªªæ˜ |
|:---|:---|:---|
| **P0 åŠŸèƒ½** | 100% é€šé | æ‰€æœ‰ P0 é©—è­‰é …ç›®å¿…é ˆå…¨æ•¸é€šéï¼Œä¸å¯æœ‰ä¾‹å¤– |
| **P1 åŠŸèƒ½** | â‰¥ 90% é€šé | å…è¨±å°‘é‡å·²çŸ¥é™åˆ¶ï¼Œä½†éœ€é–‹ Issue è¿½è¹¤ |
| **æ•ˆèƒ½æŒ‡æ¨™** | ç¬¦åˆåŸºç·š | Lighthouse â‰¥ 80ã€P95 â‰¤ 500msã€Bundle â‰¤ 300KB |
| **å®‰å…¨æ€§** | 100% é€šé | æ‰€æœ‰å®‰å…¨é …ç›®ç‚ºç¡¬æ€§é–€æª»ï¼Œä¸å¯ä¾‹å¤– |

---

## å…«ã€é‡æ§‹åŸ·è¡Œé †åºç¸½è¦½ (Execution Roadmap)

> ä»¥ä¸‹ç‚ºå»ºè­°çš„é–‹ç™¼é †åºï¼Œæ¯å€‹ Phase å®Œæˆé©—è­‰å¾Œå†é€²å…¥ä¸‹ä¸€å€‹ã€‚

```mermaid
gantt
    title GenPic Master é‡æ§‹è·¯ç·šåœ–
    dateFormat  YYYY-MM-DD
    axisFormat  %m/%d

    section Phase 0 - å‰ç«¯é‡æ§‹
    å®‰è£ shadcn/ui èˆ‡ç›®éŒ„çµæ§‹    :p0a, 2026-02-11, 2d
    æ‹†è§£ God Component            :p0b, after p0a, 4d
    å»ºç«‹ API æŠ½è±¡å±¤               :p0c, after p0b, 3d
    è·¯ç”± + Error Boundary + æ¸¬è©¦  :p0d, after p0c, 2d
    Phase 0 é©—è­‰                  :milestone, after p0d, 0d

    section Phase 1 - Auth & Gateway
    æ¸…ç† Firebase ä¾è³´            :p1a, after p0d, 1d
    åˆå§‹åŒ– Azure Functions        :p1b, after p1a, 2d
    å¯¦ä½œ MSAL èªè­‰                :p1c, after p1b, 3d
    API Gateway + Rate Limit      :p1d, after p1c, 2d
    Phase 1 é©—è­‰                  :milestone, after p1d, 0d

    section Phase 2 - DB & Storage
    PostgreSQL Schema + pgvector  :p2a, after p1d, 3d
    Blob Storage + SAS Token      :p2b, after p2a, 2d
    è³‡æ–™é·ç§» Firestore â†’ PG       :p2c, after p2b, 3d
    æ›´æ–°å‰ç«¯ Service å±¤           :p2d, after p2c, 2d
    Phase 2 é©—è­‰                  :milestone, after p2d, 0d

    section Phase 3 - AI Core
    æ–‡ä»¶åˆ†æ Function             :p3a, after p2d, 3d
    åœ–ç‰‡ç”Ÿæˆ Function             :p3b, after p3a, 3d
    é¢¨æ ¼åˆ†æ Function + å®‰å…¨      :p3c, after p3b, 2d
    Phase 3 é©—è­‰                  :milestone, after p3c, 0d

    section Phase 4 - Enterprise
    å¤šç§Ÿæˆ¶ + æ¬Šé™ + i18n          :p4a, after p3c, 5d
    ç›£æ§ + CI/CD                  :p4b, after p4a, 3d
```

### åŸ·è¡Œå»ºè­°

| é …ç›® | å»ºè­° |
|:---|:---|
| å…ˆåšä»€éº¼ | **Phase 0 (å‰ç«¯é‡æ§‹)** â€” é€™æ˜¯æ‰€æœ‰å¾ŒçºŒå·¥ä½œçš„åŸºç¤ï¼Œä¹Ÿæ˜¯é¢¨éšªæœ€ä½çš„ä¸€æ­¥ |
| ç‚ºä»€éº¼ | ä¸æ”¹è®Šä»»ä½•åŠŸèƒ½æˆ–å¾Œç«¯ï¼Œç´”ç²¹æ‹†åˆ†ç¨‹å¼ç¢¼ï¼Œéš¨æ™‚å¯å›é€€ |
| æ¯æ­¥é©—è­‰ | æ¯å€‹ Step çµæŸå¾Œè·‘å†’ç…™æ¸¬è©¦ï¼Œç¢ºä¿æœªç ´å£æ—¢æœ‰åŠŸèƒ½ |
| Git ç­–ç•¥ | æ¯å€‹ Phase ä¸€å€‹ feature branchï¼Œé€šéé©—è­‰å¾Œ merge è‡³ main |
| é¢¨éšªç®¡æ§ | Phase 2 è³‡æ–™é·ç§»å‰å‹™å¿…å®Œæˆ Firestore å®Œæ•´å‚™ä»½ |
